/////////////////////////////////////////////////////////////////////////////
// qcengine_random.js
// Copyright 2000-2011 Eric Johnston, Machine Level
// qcengine@machinelevel.com
//
//  License:
//    (This is similar to the zlib license, with item 4 added and modifications
//     which apply only to commercial use.) 
//
//  This software is provided 'as-is', without any express or implied
//  warranty. In no event will the authors be held liable for any damages
//  arising from the use of this software.
//
//  Commercial use requires written authorization from the author.
//  Please contact me, as I can also help make sure you're getting the best use
//  from this software, and have the most up-to-date version.
//
//  Permission is granted to anyone to use this software for non-commercial
//  purposes, and to alter it and redistribute it freely, subject to the
//  following restrictions:
//
//  1. The origin of this software must not be misrepresented; you must not
//     claim that you wrote the original software. If you use this software
//     in a product, an acknowledgment in the product documentation would be
//     appreciated but is not required.
//  2. Altered source versions must be plainly marked as such, and must not be
//     misrepresented as being the original software.
//  3. This notice may not be removed or altered from any source distribution.
//  4. If you find this material useful, I'd love to know. If there is an email
//     address listed above this notice, please consider sending me a note.
//  (end of license text)
//
//  Commercial interest: There are several versions of this software, each
//  designed to maximize speed under different hardware and/or language constraints.
//  For more info, please contact me at qcengine@machinelevel.com
//


var QRandomTestText1 =
"[203,31,87,235,240,253,53,238,69,125,37,158,147,71,191,254,0,189,102,232,21,136,107,25,64,126,209,91,2,178,106,138,178,200,13,117,220,59,252,243,223,139,173,177,234,14,2,194,38,8,133,91,107,65,205,103,50,126,124,220,194,143,147,173,179,255,245,174,223,74,228,69,80,225,254,215,176,172,100,56,113,26,234,3,95,104,36,48,74,108,165,92,80,86,94,191,106,196,194,12,186,26,219,187,0,191,180,243,70,3,248,134,37,63,63,141,53,203,158,145,125,156,112,218,242,150,175,228,185,34,175,52,36,203,122,158,234,74,219,81,97,144,189,233,49,145,105,141,158,209,46,210,100,58,241,41,175,254,244,216,11,194,31,233,220,203,94,96,239,60,240,186,160,63,25,30,233,252,63,168,252,16,89,223,9,70,82,57,141,19,61,223,179,84,238,228,164,155,2,221,100,101,207,221,107,6,203,31,101,221,247,95,228,194,145,98,31,247,140,159,39,56,233,60,87,181,35,247,11,211,234,57,220,35,74,0,225,140,160,39,173,235,255,234,161,203,54,107,169,89,201,181,164,242,197,118,52,213,210,79,84,75,210,164,97,94,109,158,198,234,230,88,20,238,105,17,120,135,254,37,88,140,18,79,196,191,149,212,111,234,102,24,127,177,137,240,90,122,1,234,111,164,111,254,218,10,255,216,83,77,168,226,238,216,186,194,253,161,98,217,214,5,244,197,152,121,88,57,91,189,119,97,42,52,191,139,40,191,133,26,68,94,72,97,47,51,211,154,215,113,41,202,9,94,225,23,150,1,113,54,213,105,109,70,51,131,138,248,41,228,234,215,35,98,168,174,65,234,230,84,21,8,96,207,117,81,174,85,222,61,129,169,236,177,122,126,185,201,20,64,20,66,168,72,175,33,8,18,199,0,84,157,154,179,101,75,74,67,166,45,148,230,143,203,1,170,12,69,226,31,33,209,60,250,111,236,136,190,25,237,172,212,99,245,35,130,124,61,182,112,231,1,121,129,234,131,33,55,40,155,219,61,5,202,175,168,74,41,217,96,216,122,94,92,240,117,201,142,61,227,243,164,186,185,15,223,79,115,106,67,104,42,19,104,116,251,143,139,202,107,11,196,183,85,172,46,133,55,96,185,242,57,131,30,255,131,65,74,243,74,138,4,47,230,137,251,156,199,192,234,167,142,78,140,154,120,110,42,134,115,66,44,102,172,205,207,148,154,172,54,61,24,15,45,32,62,29,184,115,2,241,182,29,0,236,197,85,91,42,220,0,97,38,180,201,66,181,136,48,5,201,247,49,4,178,72,232,0,242,175,188,225,212,137,131,162,68,193,102,90,153,250,182,187,207,45,97,225,223,189,34,236,2,40,90,37,82,214,249,140,88,114,213,132,10,99,52,2,218,201,83,35,161,111,164,108,208,13,148,209,78,106,26,240,113,115,171,210,133,69,7,219,13,12,2,214,28,127,68,165,32,184,181,222,135,176,122,133,52,215,107,220,227,34,193,26,244,230,25,178,116,91,174,238,83,161,213,50,180,248,43,26,184,1,124,166,148,125,157,83,155,47,145,12,171,8,236,88,33,142,224,134,104,112,134,78,191,47,101,205,204,58,206,24,235,189,246,208,171,35,173,13,227,128,32,219,40,117,244,223,113,230,106,29,110,202,45,190,74,74,229,169,213,90,152,133,78,66,224,32,160,214,216,100,127,53,38,29,115,77,47,221,32,193,97,98,250,170,25,85,222,83,246,121,160,11,250,33,91,41,169,72,255,149,86,241,96,112,245,188,82,214,111,210,112,11,185,211,220,24,20,194,218,78,34,246,102,58,232,200,92,6,76,151,95,151,90,74,216,176,209,107,236,115,103,183,190,240,25,158,113,72,24,193,253,242,5,198,11,223,223,200,45,44,229,216,119,169,2,65,233,132,154,45,166,205,230,204,206,199,226,15,94,74,223,13,107,103,26,13,182,68,79,112,200,128,240,41,38,103,167,180,44,200,37,171,117,239,103,16,179,104,122,94,249,43,148,31,6,173,193,229,189,191,47,209,30,110,129,196,156,137,115,162,147,58,31,110,201,95,128,152,52,175,80,38,217,66,159,143,62,92,166,208,242,172,248,85,224,62,128,91,25,189,65,123,111,186,244,227,176,119,35,13,164,128,70,194,14,168,223,52,54,247,5,90,207,237,59,89,146,33,140,61,191,44,88,236,160,68,240,160,23,224,146,136,156,141,185,180]";
var QRandomTestText2 =
"[208,251,22,42,154,231,221,123,66,209,78,106,244,217,164,197,19,222,44,89,112,133,130,58,166,25,44,195,185,119,1,37,177,121,177,220,120,41,74,137,77,155,144,81,179,180,34,225,230,122,46,218,58,18,40,13,83,65,233,148,141,188,212,24,143,74,135,6,126,101,12,246,93,96,138,96,166,23,178,224,154,211,172,6,81,71,71,84,135,135,66,13,54,165,163,74,144,83,33,45,8,196,97,209,42,224,235,139,66,144,209,61,91,48,24,195,67,158,201,141,25,127,197,60,252,124,21,61,79,20,191,172,68,18,143,119,106,183,231,159,103,144,96,10,181,78,50,162,156,113,236,118,3,155,53,42,194,71,194,158,74,185,59,245,166,230,153,226,215,106,53,32,166,64,178,201,232,110,38,92,43,119,179,141,92,143,88,164,230,162,185,165,91,184,122,17,47,43,164,178,191,107,129,226,17,104,16,161,127,9,164,219,85,159,254,45,17,192,4,183,121,124,175,98,199,179,157,214,23,19,228,107,202,0,218,172,100,222,229,37,151,10,214,223,114,196,70,231,140,128,145,1,31,163,179,190,183,245,102,234,73,187,75,119,225,197,103,128,120,160,179,63,220,243,39,50,1,198,0,165,48,208,84,88,70,3,164,219,140,111,31,65,244,171,255,14,234,55,140,192,144,88,230,83,114,94,27,54,150,233,149,108,106,145,72,38,214,62,93,45,227,73,89,34,40,179,78,105,232,135,72,246,93,235,238,55,209,36,59,204,133,6,222,67,114,208,222,106,239,48,223,134,56,9,93,49,174,213,206,227,125,212,81,141,199,29,69,31,186,105,163,247,135,134,86,176,150,67,172,8,39,197,194,17,144,50,150,19,51,186,72,24,8,97,116,71,51,107,200,166,105,214,18,3,186,84,25,66,181,4,237,53,111,94,155,151,31,31,233,34,125,71,61,168,81,129,98,20,114,32,31,98,133,230,90,43,127,208,1,114,141,104,68,74,61,83,95,35,229,241,199,132,201,20,210,99,93,174,242,100,220,73,251,211,233,108,223,232,15,253,170,28,246,137,111,146,223,64,167,177,157,209,135,194,100,41,245,108,8,0,242,212,41,253,136,154,212,123,128,188,254,12,225,85,34,219,91,236,40,170,104,6,253,194,124,84,101,181,96,176,73,31,151,37,57,77,13,179,79,5,63,162,120,187,217,165,23,30,74,149,9,22,155,88,184,238,117,168,44,173,34,161,81,9,188,150,175,64,123,127,13,240,74,34,251,178,60,102,59,111,113,243,160,64,239,231,226,193,31,93,9,87,104,96,133,73,155,220,121,63,42,73,47,185,252,63,160,219,140,116,151,5,62,64,223,147,232,127,43,254,66,169,114,109,151,173,173,109,35,32,29,58,127,55,137,244,118,103,126,96,130,106,79,27,175,200,17,57,102,219,39,155,16,30,210,251,99,211,221,145,168,22,174,137,23,166,91,202,126,21,169,245,79,243,104,139,147,170,72,158,200,147,96,227,117,246,244,124,224,168,218,106,12,138,97,215,116,39,29,254,36,26,221,129,158,208,35,102,219,123,184,44,70,171,40,220,62,34,102,117,50,232,41,67,216,232,138,175,91,71,60,111,92,72,78,191,3,195,213,177,215,81,161,96,153,29,160,200,132,250,168,10,112,191,90,194,255,242,122,44,36,34,88,25,183,131,36,68,4,190,49,130,186,254,150,213,4,125,175,28,128,59,98,52,223,84,69,133,100,37,236,85,151,215,5,199,2,18,199,184,121,21,151,134,187,234,126,189,162,89,39,213,131,184,212,190,119,24,147,6,234,109,246,234,3,86,38,144,104,80,245,101,165,192,8,60,27,178,18,243,12,70,177,142,236,16,99,113,64,101,104,75,15,150,28,81,9,101,94,117,84,179,66,135,25,233,187,132,235,137,215,227,14,95,232,160,94,149,152,93,105,50,63,191,222,14,89,160,112,103,149,236,12,42,114,127,53,243,56,129,140,221,214,209,118,207,18,166,185,111,165,241,120,233,177,60,23,67,92,148,102,144,229,107,117,156,151,82,244,131,153,141,213,60,181,233,37,219,94,120,186,159,172,38,234,229,68,57,253,98,69,32,13,239,119,167,42,96,199,5,98,124,231,67,115,69,136,156,233,147,198,241,193,4,178,79,199,110,198,24,140,175,98,206,127,133,81,243,60,78,232,177,119,76,53,172,98,69,236,75,59,29,136,163,44,196,90,196,18,193]";
var QRandomTestText3 =
"[77,239,182,169,211,152,82,9,41,120,4,137,142,161,156,226,240,41,212,97,130,19,74,253,201,29,52,137,226,66,77,69,221,72,218,211,175,243,139,232,186,51,19,163,79,20,239,237,153,190,115,202,197,73,49,173,227,165,160,181,30,147,165,119,46,216,184,29,36,0,93,240,69,108,198,37,58,203,192,90,193,62,189,188,75,244,22,189,107,78,81,165,160,176,183,225,151,121,138,126,93,148,35,180,4,47,82,118,0,163,95,135,14,178,38,190,144,243,114,201,118,209,58,15,151,68,85,231,10,88,90,217,88,173,247,161,232,41,99,55,23,12,127,43,101,109,146,178,42,20,9,146,226,198,5,124,188,36,191,182,127,245,132,2,41,44,143,133,68,0,63,3,91,115,49,127,50,50,70,249,218,182,120,242,82,81,34,17,223,163,181,219,146,197,92,138,88,11,102,117,130,203,81,223,164,11,190,226,228,230,44,228,88,26,107,214,49,50,148,248,247,26,206,154,138,56,253,56,242,135,58,136,48,185,196,194,109,29,79,211,127,150,63,36,113,31,145,154,45,157,189,7,213,180,167,246,99,119,126,222,129,107,95,6,207,252,19,60,253,178,125,16,121,250,77,88,199,248,139,190,252,194,30,43,139,101,220,96,62,155,160,86,21,22,7,183,184,197,223,119,230,176,112,128,136,44,124,216,29,215,104,209,196,218,137,57,110,65,234,23,193,225,190,231,63,231,219,136,228,209,224,185,73,19,229,250,51,135,123,116,23,143,81,158,141,24,141,22,83,13,203,74,23,241,98,127,81,7,113,122,165,69,145,80,233,38,51,141,219,147,76,239,100,118,142,152,236,100,84,239,78,48,97,149,233,40,59,125,133,153,39,41,181,171,70,35,137,254,106,89,156,48,102,81,34,194,134,189,18,231,222,150,170,157,11,207,157,11,250,27,15,190,73,188,163,18,11,122,97,78,238,153,17,121,65,254,210,99,247,163,197,208,218,141,133,221,27,60,123,203,8,123,211,90,87,192,243,109,138,165,204,26,79,232,42,202,235,59,49,118,70,60,211,72,111,246,38,66,21,85,55,30,79,87,3,189,225,208,154,65,249,85,106,251,30,243,134,70,30,137,255,126,65,145,251,222,108,255,56,8,97,201,112,168,59,62,121,214,2,101,144,60,241,36,17,49,213,76,23,153,27,61,225,111,47,137,60,101,146,84,214,227,208,11,54,111,213,116,160,136,51,122,88,118,74,219,21,36,71,106,125,233,26,39,42,59,232,89,100,220,207,26,185,82,135,11,56,23,112,89,130,169,104,21,13,106,170,158,99,139,93,248,161,188,155,77,221,141,134,117,186,121,111,19,43,108,22,46,7,229,203,163,229,110,194,217,112,224,16,18,71,160,84,120,131,73,206,238,134,135,157,70,11,82,214,207,152,32,2,24,129,86,176,193,71,252,177,103,164,230,78,5,163,196,53,208,211,91,119,251,9,6,49,138,70,90,92,252,94,221,35,224,61,193,248,206,137,99,153,242,136,87,212,119,224,171,248,160,84,246,226,234,235,202,21,245,227,180,248,247,171,32,39,70,154,223,165,198,164,186,205,143,122,172,108,5,68,95,96,221,87,254,161,43,112,22,26,192,218,3,232,106,134,77,92,230,15,211,4,0,209,80,177,121,134,223,178,203,29,87,209,170,153,17,251,255,78,69,138,166,81,109,237,171,47,108,114,116,99,184,46,87,25,91,106,93,50,98,14,211,142,2,245,151,224,76,41,29,118,37,54,79,234,148,178,132,52,96,58,75,5,77,254,106,72,157,61,157,93,21,7,128,62,130,70,185,165,198,144,152,188,233,247,92,158,57,16,208,169,62,38,23,71,122,187,248,89,129,163,135,171,106,17,223,222,212,88,79,250,171,129,181,7,224,246,101,196,65,181,80,89,239,211,213,186,125,128,50,178,147,219,11,254,250,159,42,202,194,239,149,212,209,54,67,42,108,72,212,171,48,182,192,243,72,53,36,74,85,152,59,163,119,78,62,41,140,64,58,103,139,73,72,205,118,196,212,245,58,206,120,130,93,48,48,63,65,215,213,56,183,29,74,215,0,148,99,247,229,63,143,61,193,152,86,118,67,122,131,27,36,39,110,142,57,178,22,158,94,189,129,81,241,174,108,205,171,61,93,68,18,132,209,25,140,79,246,92,133,92,209,96,59,4,217,137,79,112,137,1,230,213,217,161,177,252,138,251,131,234,225]";



// New method as of 2/3/2013:  https://qrng.anu.edu.au/API/jsonI.php?length=10&type=uint8
// This lab in australia is very well run.


function QRandom()
{
    this.buffer = new Array();
    this.buffer[0] = eval(QRandomTestText1);
    this.buffer[1] = eval(QRandomTestText2);
    this.buffer[2] = eval(QRandomTestText3);
    this.currentBuffer = 0;
    this.currentBufferPos = 0;

    this.nextByte = function ()
    {
        var result = this.buffer[this.currentBuffer][this.currentBufferPos];
        this.currentBufferPos++;
        if (this.currentBufferPos >= this.buffer[this.currentBuffer].length)
        {
            this.currentBufferPos = 0;
            // TODO: replenish the old buffer with new random data
            this.currentBuffer++;
            if (this.currentBuffer >= this.buffer.length)
                this.currentBuffer = 0;
        }
        return result;
    }

    this.random0to1 = function ()
    {
        var rand = this.nextByte();
        rand /= 255;
        rand += this.nextByte();
        rand /= 255;
        rand += this.nextByte;
        rand /= 255;
        rand += this.nextByte;
        rand /= 255;
        return rand;
    }
}

function QRandomResponse()
{
    var responseText = "[133,215,246,198,78,133,66,149,121,176]";
    var responseBytes = eval('(' + responseText + ')');
    console.log(responseBytes);
}
